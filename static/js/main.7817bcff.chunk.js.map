{"version":3,"sources":["algolia.ts","styles.ts","App.tsx","index.tsx"],"names":["search","id","headline","section","label","topics","byline","a","app","localStorage","getItem","split","length","applicationId","apiKey","indexName","console","log","index","algoliasearch","initIndex","getSettings","topicArray","map","topic","query","optionalWords","word","trim","filter","match","filterSection","filterId","undefined","filters","Boolean","join","hitsPerPage","ignorePlurals","removeStopWords","optionalFilters","error","AppWrapper","styled","div","ArticleWrapper","parseByLine","children","attributes","value","App","useState","algolia","setAlgolia","setHeadline","setSection","setLabel","setTopics","setByline","results","setResults","handleSearchClick","useEffect","then","handleArticleClick","handleClearClick","className","onChange","evt","target","onClick","hits","publishedTime","leadAsset","keywords","content","url","name","e","stopPropagation","href","moment","format","src","crop","dangerouslySetInnerHTML","__html","setItem","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7817bcff.chunk.js","sourcesContent":["import algoliasearch from \"algoliasearch\";\n\nexport const search = async (\n  id: string,\n  headline: string,\n  section: string,\n  label: string,\n  topics: string,\n  byline: string\n) => {\n  const app = (localStorage.getItem(\"algolia\") || \"\").split(\",\");\n\n  if (app.length !== 3) return;\n\n  const [applicationId, apiKey, indexName] = app;\n\n  console.log(applicationId, apiKey, indexName);\n\n  if (!applicationId || !apiKey || !indexName) return;\n\n  const index = algoliasearch(applicationId, apiKey).initIndex(indexName);\n\n  console.log(\"Settings\", await index.getSettings());\n  try {\n    const topicArray =\n      topics?.split(\", \").map((topic) => `topic.name:'${topic}'}`) ?? [];\n    const query = headline + (byline.length > 1 ? ' \"' + byline + '\"' : \"\");\n\n    const optionalWords = headline\n      .split(\" \")\n      .map((word) => word.trim())\n      .filter((word) => !word.match(/^[A-Z].*/));\n\n    console.log(\"optionalWords\", optionalWords);\n\n    const filterSection = section !== \"\" ? [`section:${section}`] : [];\n    const filterId = id ? `NOT objectID:${id}` : undefined;\n    const filters = [filterSection, filterId].filter(Boolean).join(\" AND \");\n    console.log(\"filters\", filters);\n    return await index.search(query, {\n      hitsPerPage: 9,\n      ignorePlurals: true,\n      removeStopWords: true,\n      optionalWords: [...optionalWords, byline],\n      filters: filterId,\n      // filters:\n      //   \"algoliaData.publishedTimestamp >= \" + new Date(2021, 4).getTime(),\n      optionalFilters: [`label:${label}`, ...filterSection, ...topicArray],\n    });\n  } catch (e) {\n    console.error(e);\n  }\n};\n","import styled from \"styled-components\";\n\nexport const AppWrapper = styled.div`\n  font-family: Roboto, RobotoDraft, Helvetica, Arial, sans-serif;\n  display: flex;\n  flex-direction: column;\n  font-size: 12px;\n\n  .form {\n    display: flex;\n    flex-direction: column;\n    width: 600px;\n\n    > div {\n      display: flex;\n      justify-content: space-between;\n      margin: 2px;\n      span {\n        font-weight: bold;\n      }\n    }\n    input {\n      width: 500px;\n    }\n    .buttons {\n      display: flex;\n      justify-content: flex-end;\n      button {\n        margin: 5px;\n      }\n    }\n  }\n`;\n\nexport const ArticleWrapper = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n\n  .article {\n    border: 1px black solid;\n    padding: 10px;\n    margin: 10px;\n    width: 320px;\n    height: 360px;\n    overflow: scroll;\n    .headline {\n      font-size: 16px;\n      a,\n      a:visited {\n        color: inherit;\n        text-decoration: none;\n      }\n    }\n    .section {\n      color: #500;\n    }\n    .topics {\n      color: #050;\n    }\n    .labels {\n      color: #540;\n    }\n    .keywords {\n      color: #005;\n    }\n    .byline {\n      color: #055;\n    }\n    .image {\n      justify-content: center;\n      display: flex;\n      img {\n        width: 300px;\n      }\n    }\n  }\n`;\n","import React, { useEffect, useState } from \"react\";\nimport { search } from \"./algolia\";\nimport moment from \"moment\";\nimport { AppWrapper, ArticleWrapper } from \"./styles\";\n\nconst parseByLine = (byline: any) =>\n  byline\n    .map(({ children }: any) =>\n      children.map(({ attributes }: any) => attributes.value).join(\" \")\n    )\n    .join(\" \");\nconst App = () => {\n  const [algolia, setAlgolia] = useState(localStorage.getItem(\"algolia\") || \"\");\n\n  const [headline, setHeadline] = useState(\n    \"If this was goodbye, Harry Kane went with a whimper\"\n  );\n  const [section, setSection] = useState(\"sport\");\n  const [label, setLabel] = useState(\"Premier League\");\n  const [topics, setTopics] = useState(\"Premier League, Football\");\n  const [byline, setByline] = useState(\"Alyson Rudd\");\n  const [results, setResults] = useState<any>();\n\n  const handleSearchClick = async () => {\n    setResults(await search(\"\", headline, section, label, topics, byline));\n  };\n\n  useEffect(() => {\n    search(\"\", headline, section, label, topics, byline).then(setResults);\n  }, []);\n\n  const handleArticleClick = async ({\n    id,\n    headline,\n    label,\n    section,\n    topics,\n    byline,\n  }: any) => {\n    setHeadline(headline ?? \"\");\n    setSection(section ?? \"\");\n    setLabel(label ?? \"\");\n    setTopics(topics ?? \"\");\n    setByline(byline ?? \"\");\n    setResults(await search(id, headline, section, label, topics, byline));\n  };\n  const handleClearClick = async () => {\n    setHeadline(\"\");\n    setSection(\"\");\n    setLabel(\"\");\n    setTopics(\"\");\n    setByline(\"\");\n  };\n\n  console.log(results);\n  return (\n    <AppWrapper className=\"App\">\n      <div className=\"form\">\n        <div>\n          <span>Headline</span>\n          <input\n            value={headline}\n            onChange={(evt) => setHeadline(evt.target.value)}\n          />\n        </div>\n        <div>\n          <span>Section</span>\n          <input\n            value={section}\n            onChange={(evt) => setSection(evt.target.value)}\n          />\n        </div>\n        <div>\n          <span>Label</span>\n          <input value={label} onChange={(evt) => setLabel(evt.target.value)} />\n        </div>\n        <div>\n          <span>Topics</span>\n          <input\n            value={topics}\n            onChange={(evt) => setTopics(evt.target.value)}\n          />\n        </div>\n        <div>\n          <span>Byline</span>\n          <input\n            value={byline}\n            onChange={(evt) => setByline(evt.target.value)}\n          />\n        </div>\n        <div className=\"buttons\">\n          <button onClick={handleSearchClick}>Search</button>\n          <button onClick={handleClearClick}>Clear</button>\n        </div>\n      </div>\n      <ArticleWrapper>\n        {results?.hits?.map(\n          ({\n            id,\n            headline,\n            publishedTime,\n            label,\n            section,\n            leadAsset,\n            topics,\n            keywords,\n            byline,\n            content,\n            url,\n          }: any) => (\n            <div\n              className=\"article\"\n              key={id}\n              onClick={() =>\n                handleArticleClick({\n                  id,\n                  headline,\n                  label,\n                  section,\n                  topics: topics?.map(({ name }: any) => name).join(\", \"),\n                  byline: parseByLine(byline),\n                })\n              }\n            >\n              <div\n                className=\"headline\"\n                onClick={(e) => {\n                  e.stopPropagation();\n                }}\n              >\n                <a href={url} target=\"_TAB\">\n                  {headline}\n                </a>\n              </div>\n              <div className=\"publishedTime\">\n                {moment(publishedTime).format(\"LLLL\")}\n              </div>\n              <div className=\"byline\">{parseByLine(byline)}</div>\n              <div className=\"section\">Section:{section}</div>\n              <div className=\"image\">\n                <img src={leadAsset?.crop?.url} />\n              </div>\n              <div className=\"label\">Label:{label}</div>\n              <div className=\"topics\">\n                topics:{topics?.map(({ name }: any) => name).join(\", \")}\n              </div>\n              <div className=\"keywords\">Keywords:{keywords.join(\", \")}</div>\n\n              <div\n                className=\"content\"\n                dangerouslySetInnerHTML={{ __html: content }}\n              />\n            </div>\n          )\n        )}\n      </ArticleWrapper>\n      <div className=\"form\">\n        <div>\n          <span>AlgoliaKeys</span>\n          <input\n            value={algolia}\n            onChange={(evt) => {\n              localStorage.setItem(\"algolia\", evt.target.value);\n              setAlgolia(evt.target.value);\n            }}\n          />\n        </div>\n      </div>\n    </AppWrapper>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}